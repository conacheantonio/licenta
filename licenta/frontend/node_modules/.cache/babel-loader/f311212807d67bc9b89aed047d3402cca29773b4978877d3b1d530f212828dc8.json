{"ast":null,"code":"import{useState}from'react';import Error from'../../error/error';import{createBook}from'../../../api/book';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function NewBookForm(){const[ISBN,setISBN]=useState('');const[title,setTitle]=useState('');const[author,setAuthor]=useState('');const[description,setDescription]=useState('');const[year,setYear]=useState(new Date().getFullYear());const[pages,setPages]=useState(0);const[genre,setGenre]=useState('');const[errorMessage,setErrorMessage]=useState('');async function handleFormSubmit(event){// prevent redirect before validations\nevent.preventDefault();try{const response=await createBook({ISBN:Number(ISBN),title,author,description,year:Number(year),pages:Number(pages),genre});// check for error\nconst status=response.status;if(status!==204){const json=await response.json();setErrorMessage(json.message);return;}// refresh books list\nwindow.location.reload();}catch(e){// server died or response could not be read\nsetErrorMessage('Ceva nu a mers. Te rugam sa revii mai tarziu.');}}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:event=>handleFormSubmit(event),children:[/*#__PURE__*/_jsx(\"label\",{children:\"ISBN\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:event=>setISBN(event.target.value),placeholder:\"13 cifre incepand cu 978\",required:true}),/*#__PURE__*/_jsx(\"label\",{children:\"Titlu\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:event=>setTitle(event.target.value),placeholder:\"Titlul cartii\",required:true}),/*#__PURE__*/_jsx(\"label\",{children:\"Autor\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:event=>setAuthor(event.target.value),placeholder:\"Autorul\",required:true}),/*#__PURE__*/_jsx(\"label\",{children:\"Descriere\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:event=>setDescription(event.target.value),placeholder:\"Descriere scurta\",required:true}),/*#__PURE__*/_jsx(\"label\",{children:\"An\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:event=>setYear(event.target.value),placeholder:\"min 2007, max anul curent\",required:true}),/*#__PURE__*/_jsx(\"label\",{children:\"Numar de pagini\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:event=>setPages(event.target.value),placeholder:\"numarul de pagini\",required:true}),/*#__PURE__*/_jsx(\"label\",{children:\"Gen\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:event=>setGenre(event.target.value),placeholder:\"genul literar\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Adauga\"})]}),/*#__PURE__*/_jsx(Error,{message:errorMessage})]});}","map":{"version":3,"names":["useState","Error","createBook","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","NewBookForm","ISBN","setISBN","title","setTitle","author","setAuthor","description","setDescription","year","setYear","Date","getFullYear","pages","setPages","genre","setGenre","errorMessage","setErrorMessage","handleFormSubmit","event","preventDefault","response","Number","status","json","message","window","location","reload","e","children","onSubmit","type","onChange","target","value","placeholder","required"],"sources":["C:/Users/conac/Desktop/OFICIAL/bookstore/frontend/src/components/book/new-book-form/new-book-form.jsx"],"sourcesContent":["import { useState } from 'react'\r\nimport Error from '../../error/error'\r\nimport { createBook } from '../../../api/book'\r\n\r\nexport default function NewBookForm() {\r\n    const [ISBN, setISBN] = useState('')\r\n    const [title, setTitle] = useState('')\r\n    const [author, setAuthor] = useState('')\r\n    const [description, setDescription] = useState('')\r\n    const [year, setYear] = useState(new Date().getFullYear())\r\n    const [pages, setPages] = useState(0)\r\n    const [genre, setGenre] = useState('')\r\n    const [errorMessage, setErrorMessage] = useState('')\r\n\r\n    async function handleFormSubmit(event) {\r\n        // prevent redirect before validations\r\n        event.preventDefault()\r\n        try {\r\n            const response = await createBook({ ISBN: Number(ISBN), title, author, description, year: Number(year), pages: Number(pages), genre })\r\n\r\n            // check for error\r\n            const status = response.status\r\n            if (status !== 204) {\r\n                const json = await response.json()\r\n                setErrorMessage(json.message)\r\n                return\r\n            }\r\n            // refresh books list\r\n            window.location.reload()\r\n        } catch (e) { // server died or response could not be read\r\n            setErrorMessage('Ceva nu a mers. Te rugam sa revii mai tarziu.')\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <form onSubmit={(event) => handleFormSubmit(event)}>\r\n                <label>ISBN</label>\r\n                <input type=\"number\" onChange={(event) => setISBN(event.target.value)} placeholder=\"13 cifre incepand cu 978\" required/>\r\n                <label>Titlu</label>\r\n                <input type=\"text\" onChange={(event) => setTitle(event.target.value)} placeholder=\"Titlul cartii\" required/>\r\n                <label>Autor</label>\r\n                <input type=\"text\" onChange={(event) => setAuthor(event.target.value)} placeholder=\"Autorul\" required/>\r\n                <label>Descriere</label>\r\n                <input type=\"text\" onChange={(event) => setDescription(event.target.value)} placeholder=\"Descriere scurta\" required/>\r\n                <label>An</label>\r\n                <input type=\"number\" onChange={(event) => setYear(event.target.value)} placeholder=\"min 2007, max anul curent\" required/>\r\n                <label>Numar de pagini</label>\r\n                <input type=\"number\" onChange={(event) => setPages(event.target.value)} placeholder=\"numarul de pagini\" required/>\r\n                <label>Gen</label>\r\n                <input type=\"text\" onChange={(event) => setGenre(event.target.value)} placeholder=\"genul literar\" required/>\r\n                <button type=\"submit\">Adauga</button>\r\n            </form>\r\n            <Error message={errorMessage} />\r\n        </>\r\n    )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}