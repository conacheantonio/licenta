{"ast":null,"code":"import{serverUrl}from'../constants';import{getToken}from'../utils/jwt';export async function getAllBooks(callback){let filter=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';let fieldToFilterBy=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';const token=getToken();if(!token){return'';}const res=await fetch(serverUrl+\"/books\".concat(filter?'?key='+fieldToFilterBy+'&value='+filter:''),{method:'GET',headers:{'Accept':'application/json','Content-Type':'application/json'},credentials:'include'});const json=await res.json();callback(json.message);}export async function removeBook(ISBN){const token=getToken();if(!token){return'';}const res=await fetch(serverUrl+\"/books?ISBN=\".concat(ISBN),{method:'DELETE',headers:{'Accept':'application/json','Content-Type':'application/json'},credentials:'include'});if(res.status===204){return true;}else{const{message}=await res.json();return message;}}export async function createBook(_ref){let{ISBN,title,author,description,year,pages,genre}=_ref;const token=getToken();if(!token){return'';}const res=await fetch(serverUrl+\"/books\",{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({ISBN,title,author,description,year,pages,genre}),credentials:'include'});return res;}export async function increaseBookStock(_ref2){let{id,ISBN,year,pages}=_ref2;const token=getToken();if(!token){return'';}const res=await fetch(serverUrl+\"/books/increaseBookStock?id=\".concat(id),{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({ISBN,year,pages}),credentials:'include'});return res;}export async function changeDescription(_ref3){let{id,newDescription}=_ref3;const token=getToken();if(!token){return'';}const res=await fetch(serverUrl+\"/books/changeDescription?id=\".concat(id),{method:'PATCH',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({description:newDescription}),credentials:'include'});return res;}","map":{"version":3,"names":["serverUrl","getToken","getAllBooks","callback","filter","arguments","length","undefined","fieldToFilterBy","token","res","fetch","concat","method","headers","credentials","json","message","removeBook","ISBN","status","createBook","_ref","title","author","description","year","pages","genre","body","JSON","stringify","increaseBookStock","_ref2","id","changeDescription","_ref3","newDescription"],"sources":["C:/Users/conac/Desktop/OFICIAL/bookstore/frontend/src/api/book.js"],"sourcesContent":["import { serverUrl } from '../constants'\r\nimport { getToken } from '../utils/jwt'\r\n\r\nexport async function getAllBooks(callback, filter = '', fieldToFilterBy = '') {\r\n    const token = getToken()\r\n    if (!token) {\r\n        return ''\r\n    }\r\n    const res = await fetch(serverUrl + `/books${filter ? '?key=' + fieldToFilterBy + '&value=' + filter : ''}`, {\r\n        method: 'GET',\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        credentials: 'include'\r\n    })\r\n    const json = await res.json()\r\n    callback(json.message)\r\n}\r\n\r\nexport async function removeBook(ISBN) {\r\n    const token = getToken()\r\n    if (!token) {\r\n        return ''\r\n    }\r\n    const res = await fetch(serverUrl + `/books?ISBN=${ISBN}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        credentials: 'include'\r\n    })\r\n    if (res.status === 204) {\r\n        return true\r\n    } else {\r\n        const { message } = await res.json()\r\n        return message\r\n    }\r\n}\r\n\r\nexport async function createBook({ ISBN, title, author, description, year, pages, genre }) {\r\n    const token = getToken()\r\n    if (!token) {\r\n        return ''\r\n    }\r\n    const res = await fetch(serverUrl + `/books`, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ ISBN, title, author, description, year, pages, genre }),\r\n        credentials: 'include'\r\n    })\r\n    return res\r\n}\r\n\r\nexport async function increaseBookStock({ id, ISBN, year, pages }) {\r\n    const token = getToken()\r\n    if (!token) {\r\n        return ''\r\n    }\r\n    const res = await fetch(serverUrl + `/books/increaseBookStock?id=${id}`, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ ISBN, year, pages }),\r\n        credentials: 'include'\r\n    })\r\n    return res\r\n}\r\n\r\nexport async function changeDescription({ id, newDescription }) {\r\n    const token = getToken()\r\n    if (!token) {\r\n        return ''\r\n    }\r\n    const res = await fetch(serverUrl + `/books/changeDescription?id=${id}`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ description: newDescription }),\r\n        credentials: 'include'\r\n    })\r\n    return res\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}