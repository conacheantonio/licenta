{"ast":null,"code":"import'./book-reader-format.css';import{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function BookReaderFormat(_ref){let{id,title,author,description,genre,in_stock}=_ref;const[isBookAdded,setIsBookAdded]=useState(isBookInCart());function isBookInCart(){const booksInCart=(localStorage.getItem('books')||'').split(',');return booksInCart.find(bookId=>Number(bookId)===id);}// localstorage is a string, use comma separated values\nfunction handleAddToCartClicked(){let booksInCart=localStorage.getItem('books')||'';// book already added, remove\nif(isBookAdded){const booksInCartArray=booksInCart.split(',');const bookIdIndex=booksInCartArray.findIndex(bookId=>Number(bookId)===id);booksInCartArray.splice(bookIdIndex,1);localStorage.setItem('books',booksInCartArray.join(','));setIsBookAdded(false);return;}// split gives a last empty element because string ends in comma, need to filter\nconst currentNumberOfBooks=booksInCart.split(',').filter(Boolean).length;if(currentNumberOfBooks===3){alert('Ai deja 3 carti in cos, nu mai pot adauga altele');return;}console.log('....',id);booksInCart+=\"\".concat(id,\",\");localStorage.setItem('books',booksInCart);setIsBookAdded(true);}return/*#__PURE__*/_jsxs(\"div\",{className:\"book-reader-format-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"main-info-container\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"title\",children:title}),/*#__PURE__*/_jsx(\"p\",{className:\"author\",children:author})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"book-details\",children:[/*#__PURE__*/_jsx(\"p\",{children:description}),/*#__PURE__*/_jsx(\"p\",{className:\"genre\",children:genre})]}),/*#__PURE__*/_jsx(\"button\",{className:\"\".concat(isBookAdded?'selected':''),disabled:!in_stock,onClick:handleAddToCartClicked,children:!isBookAdded?'Adauga in cos':'Scoate din cos'}),!in_stock&&/*#__PURE__*/_jsx(\"p\",{className:\"sorry-p\",children:\"Ne pare rau, momentan cartea nu este in stoc\"})]});}","map":{"version":3,"names":["useState","jsx","_jsx","jsxs","_jsxs","BookReaderFormat","_ref","id","title","author","description","genre","in_stock","isBookAdded","setIsBookAdded","isBookInCart","booksInCart","localStorage","getItem","split","find","bookId","Number","handleAddToCartClicked","booksInCartArray","bookIdIndex","findIndex","splice","setItem","join","currentNumberOfBooks","filter","Boolean","length","alert","console","log","concat","className","children","disabled","onClick"],"sources":["C:/Users/conac/Desktop/OFICIAL/bookstore/frontend/src/components/book/book-row/reader-format/book-reader-format.jsx"],"sourcesContent":["import './book-reader-format.css'\r\nimport { useState } from 'react'\r\n\r\nexport default function BookReaderFormat({ id, title, author, description, genre, in_stock }) {\r\n    const [isBookAdded, setIsBookAdded] = useState(isBookInCart())\r\n\r\n    function isBookInCart() {\r\n        const booksInCart = (localStorage.getItem('books') || '').split(',')\r\n        return booksInCart.find(((bookId) => Number(bookId) === id))\r\n    }\r\n\r\n    // localstorage is a string, use comma separated values\r\n    function handleAddToCartClicked() {\r\n        let booksInCart = localStorage.getItem('books') || ''\r\n        // book already added, remove\r\n        if (isBookAdded) {\r\n            const booksInCartArray = booksInCart.split(',')\r\n            const bookIdIndex = booksInCartArray.findIndex((bookId) => Number(bookId) === id)\r\n            booksInCartArray.splice(bookIdIndex, 1)\r\n            localStorage.setItem('books', booksInCartArray.join(','))\r\n            setIsBookAdded(false)\r\n            return\r\n        }\r\n\r\n        // split gives a last empty element because string ends in comma, need to filter\r\n        const currentNumberOfBooks = booksInCart.split(',').filter(Boolean).length\r\n        if (currentNumberOfBooks === 3) {\r\n            alert('Ai deja 3 carti in cos, nu mai pot adauga altele')\r\n            return\r\n        }\r\n        console.log('....', id)\r\n        booksInCart += `${id},`\r\n        localStorage.setItem('books', booksInCart)\r\n        setIsBookAdded(true)\r\n    }\r\n\r\n    return (\r\n        <div className=\"book-reader-format-container\">\r\n            <div className=\"main-info-container\">\r\n                <p className=\"title\">{title}</p>\r\n                <p className=\"author\">{author}</p>\r\n            </div>\r\n            <div className=\"book-details\">\r\n                <p>{description}</p>\r\n                <p className=\"genre\">{genre}</p>\r\n            </div>\r\n            <button\r\n                className={`${isBookAdded ? 'selected' : ''}`}\r\n                disabled={!in_stock}\r\n                onClick={handleAddToCartClicked}>\r\n                    {!isBookAdded ? 'Adauga in cos' : 'Scoate din cos'}\r\n            </button>\r\n            {!in_stock && <p className=\"sorry-p\">Ne pare rau, momentan cartea nu este in stoc</p>}\r\n        </div>\r\n    )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}