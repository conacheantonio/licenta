{"ast":null,"code":"import'./increase-book-stock-form.css';import{useState}from'react';import Error from'../../error/error';import{increaseBookStock}from'../../../api/book';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function IncreaseBookStockForm(_ref){let{id,setShowStockForm}=_ref;const[ISBN,setISBN]=useState('');const[year,setYear]=useState(new Date().getFullYear());const[pages,setPages]=useState(0);const[errorMessage,setErrorMessage]=useState('');async function handleFormSubmit(event){// prevent redirect before validations\nevent.preventDefault();try{const response=await increaseBookStock({id,ISBN:Number(ISBN),year:Number(year),pages:Number(pages)});// check for error\nconst status=response.status;if(status!==204){const json=await response.json();setErrorMessage(json.message);return;}// refresh books list\nwindow.location.reload();}catch(e){// server died or response could not be read\nsetErrorMessage('Ceva nu a mers. Te rugam sa revii mai tarziu.');}}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"increase-book-form-modal\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:event=>handleFormSubmit(event),children:[/*#__PURE__*/_jsx(\"label\",{children:\"ISBN\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:event=>setISBN(event.target.value),placeholder:\"13 cifre incepand cu 978\",required:true}),/*#__PURE__*/_jsx(\"label\",{children:\"An\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:event=>setYear(event.target.value),placeholder:\"min 2007, max anul curent\",required:true}),/*#__PURE__*/_jsx(\"label\",{children:\"Numar de pagini\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:event=>setPages(event.target.value),placeholder:\"numarul de pagini\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Adauga\"}),/*#__PURE__*/_jsx(\"button\",{className:\"cancel\",onClick:()=>setShowStockForm(false),children:\"X\"})]}),/*#__PURE__*/_jsx(Error,{message:errorMessage})]})});}","map":{"version":3,"names":["useState","Error","increaseBookStock","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","IncreaseBookStockForm","_ref","id","setShowStockForm","ISBN","setISBN","year","setYear","Date","getFullYear","pages","setPages","errorMessage","setErrorMessage","handleFormSubmit","event","preventDefault","response","Number","status","json","message","window","location","reload","e","children","className","onSubmit","type","onChange","target","value","placeholder","required","onClick"],"sources":["C:/Users/conac/Desktop/OFICIAL/bookstore/frontend/src/components/book/increase-book-stock-form/increase-book-stock-form.jsx"],"sourcesContent":["import './increase-book-stock-form.css'\r\nimport { useState } from 'react'\r\nimport Error from '../../error/error'\r\nimport { increaseBookStock } from '../../../api/book'\r\n\r\nexport default function IncreaseBookStockForm({ id, setShowStockForm }) {\r\n    const [ISBN, setISBN] = useState('')\r\n    const [year, setYear] = useState(new Date().getFullYear())\r\n    const [pages, setPages] = useState(0)\r\n    const [errorMessage, setErrorMessage] = useState('')\r\n\r\n    async function handleFormSubmit(event) {\r\n        // prevent redirect before validations\r\n        event.preventDefault()\r\n        try {\r\n            const response = await increaseBookStock({ id, ISBN: Number(ISBN), year: Number(year), pages: Number(pages) })\r\n\r\n            // check for error\r\n            const status = response.status\r\n            if (status !== 204) {\r\n                const json = await response.json()\r\n                setErrorMessage(json.message)\r\n                return\r\n            }\r\n            // refresh books list\r\n            window.location.reload()\r\n        } catch (e) { // server died or response could not be read\r\n            setErrorMessage('Ceva nu a mers. Te rugam sa revii mai tarziu.')\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"increase-book-form-modal\">\r\n                <form onSubmit={(event) => handleFormSubmit(event)}>\r\n                    <label>ISBN</label>\r\n                    <input type=\"number\" onChange={(event) => setISBN(event.target.value)} placeholder=\"13 cifre incepand cu 978\" required/>\r\n                    <label>An</label>\r\n                    <input type=\"text\" onChange={(event) => setYear(event.target.value)} placeholder=\"min 2007, max anul curent\" required/>\r\n                    <label>Numar de pagini</label>\r\n                    <input type=\"text\" onChange={(event) => setPages(event.target.value)} placeholder=\"numarul de pagini\" required/>\r\n                    <button type=\"submit\">Adauga</button>\r\n                    <button className=\"cancel\" onClick={() => setShowStockForm(false)}>X</button>\r\n                </form>\r\n                <Error message={errorMessage} />\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}