{"ast":null,"code":"import{requestExtendOrder,returnBook}from'../../../../api/orders';import{transformDate}from'../../../../utils/dates';import{useState}from'react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function OrderReader(_ref){let{index,id,title,author,order_status,date_created,extend_status,return_date,start_date,is_late}=_ref;const[returnDate,setReturnDate]=useState(return_date);const[extendStatus,setExtendStatus]=useState(extend_status);async function handleReturnBook(){await returnBook(id);// if success read timestamp from db\n// potential timezones issue\nsetReturnDate(new Date().toISOString().split('.')[0].replace('T',' '));}async function handleExtendOrderRequested(){await requestExtendOrder(id);// if success\nsetExtendStatus('WAITING FOR APPROVE');}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"Numar\"}),/*#__PURE__*/_jsx(\"span\",{className:\"table-content-\".concat(index%2?'even':'odd'),children:index+1}),/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"Titlu\"}),/*#__PURE__*/_jsx(\"span\",{className:\"table-content-\".concat(index%2?'even':'odd'),children:title}),/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"Autor\"}),/*#__PURE__*/_jsx(\"span\",{className:\"table-content-\".concat(index%2?'even':'odd'),children:author}),/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"Statusul comenzii\"}),/*#__PURE__*/_jsx(\"span\",{className:\"table-content-\".concat(index%2?'even':'odd',\" \").concat(order_status==='PROCESSING'?'processing':''),children:order_status}),/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"Data plasarii comenzii\"}),/*#__PURE__*/_jsx(\"span\",{className:\"table-content-\".concat(index%2?'even':'odd'),children:transformDate(date_created)}),/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"Data inceperii\"}),/*#__PURE__*/_jsx(\"span\",{className:\"table-content-\".concat(index%2?'even':'odd'),children:transformDate(start_date)}),/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"Statusul prelungirii\"}),/*#__PURE__*/_jsx(\"span\",{className:\"table-content-\".concat(index%2?'even':'odd',\" \").concat(extendStatus==='PROCESSING'?'processing':''),children:extendStatus}),/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"Data returului\"}),/*#__PURE__*/_jsx(\"span\",{className:\"table-content-\".concat(index%2?'even':'odd'),children:transformDate(returnDate)}),/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"Intarziere?\"}),/*#__PURE__*/_jsx(\"span\",{className:\"table-content-\".concat(index%2?'even':'odd'),children:is_late?'da':''}),/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"Actiuni\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"table-content-\".concat(index%2?'even':'odd'),children:[order_status==='APPROVED'&&!return_date&&/*#__PURE__*/_jsx(\"button\",{onClick:handleReturnBook,children:\"Returneaza\"}),order_status==='APPROVED'&&!extendStatus&&!return_date&&/*#__PURE__*/_jsx(\"button\",{onClick:handleExtendOrderRequested,children:\"Prelungeste\"})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"hr\",{})]});}","map":{"version":3,"names":["requestExtendOrder","returnBook","transformDate","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","OrderReader","_ref","index","id","title","author","order_status","date_created","extend_status","return_date","start_date","is_late","returnDate","setReturnDate","extendStatus","setExtendStatus","handleReturnBook","Date","toISOString","split","replace","handleExtendOrderRequested","children","className","concat","onClick"],"sources":["C:/Users/conac/Desktop/OFICIAL/bookstore/frontend/src/components/order/order-row/reader-format/order-reader-format.jsx"],"sourcesContent":["import { requestExtendOrder, returnBook } from '../../../../api/orders'\r\nimport { transformDate } from '../../../../utils/dates'\r\nimport { useState } from 'react'\r\n\r\nexport default function OrderReader({ index, id, title, author, order_status, date_created, extend_status, return_date, start_date, is_late }) {\r\n    const [returnDate, setReturnDate] = useState(return_date)\r\n    const [extendStatus, setExtendStatus] = useState(extend_status)\r\n\r\n    async function handleReturnBook() {\r\n        await returnBook(id)\r\n        // if success read timestamp from db\r\n        // potential timezones issue\r\n        setReturnDate(new Date().toISOString().split('.')[0].replace('T', ' '))\r\n    }\r\n\r\n    async function handleExtendOrderRequested() {\r\n        await requestExtendOrder(id)\r\n        // if success\r\n        setExtendStatus('WAITING FOR APPROVE')\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <span className=\"table-head-col\">Numar</span>\r\n            <span className={`table-content-${index % 2 ? 'even' : 'odd'}`}>{index + 1}</span>\r\n            <span className=\"table-head-col\">Titlu</span>\r\n            <span className={`table-content-${index % 2 ? 'even' : 'odd'}`}>{title}</span>\r\n            <span className=\"table-head-col\">Autor</span>\r\n            <span className={`table-content-${index % 2 ? 'even' : 'odd'}`}>{author}</span>\r\n            <span className=\"table-head-col\">Statusul comenzii</span>\r\n            <span className={`table-content-${index % 2 ? 'even' : 'odd'} ${order_status === 'PROCESSING' ? 'processing' : ''}`}>{order_status}</span>\r\n            <span className=\"table-head-col\">Data plasarii comenzii</span>\r\n            <span className={`table-content-${index % 2 ? 'even' : 'odd'}`}>{transformDate(date_created)}</span>\r\n            <span className=\"table-head-col\">Data inceperii</span>\r\n            <span className={`table-content-${index % 2 ? 'even' : 'odd'}`}>{transformDate(start_date)}</span>\r\n            <span className=\"table-head-col\">Statusul prelungirii</span>\r\n            <span className={`table-content-${index % 2 ? 'even' : 'odd'} ${extendStatus === 'PROCESSING' ? 'processing' : ''}`}>{extendStatus}</span>\r\n            <span className=\"table-head-col\">Data returului</span>\r\n            <span className={`table-content-${index % 2 ? 'even' : 'odd'}`}>{transformDate(returnDate)}</span>\r\n            <span className=\"table-head-col\">Intarziere?</span>\r\n            <span className={`table-content-${index % 2 ? 'even' : 'odd'}`}>{is_late ? 'da' : ''}</span>\r\n            <span className=\"table-head-col\">Actiuni</span>\r\n            <span className={`table-content-${index % 2 ? 'even' : 'odd'}`}>\r\n                {order_status === 'APPROVED' && !return_date && <button onClick={handleReturnBook}>Returneaza</button>}\r\n                {order_status === 'APPROVED' && !extendStatus && !return_date && <button onClick={handleExtendOrderRequested}>Prelungeste</button>}\r\n            </span>\r\n            <hr />\r\n            <hr />\r\n        </>\r\n    )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}