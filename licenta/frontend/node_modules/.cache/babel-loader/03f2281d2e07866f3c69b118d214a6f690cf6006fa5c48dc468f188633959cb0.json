{"ast":null,"code":"import{useState}from'react';import{approveUser,banUser,makeAdmin}from'../../../api/users';import{getEvenOddClass}from'../../../utils/classes';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function UserRow(_ref){let{index,id,name_surname,email,phone,role,status,penalties}=_ref;const[userRole,setRole]=useState(role);const[userStatus,setStatus]=useState(status);async function handleMakeAdminClicked(){const res=await makeAdmin(id);if(res!==null&&res!==void 0&&res.length){// if true this should be undefined, otherwise error message\nalert(res);}else{// cannot make admin if order is in progress\nsetRole('ADMIN');}}async function handleApproveUser(){await approveUser(id);setStatus('ACTIVE');}async function handleBanUser(){await banUser(id);setStatus('BANNED');}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"Numar\"}),/*#__PURE__*/_jsx(\"span\",{className:\"table-content-\".concat(getEvenOddClass(index)),children:index+1}),/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"Nume\"}),/*#__PURE__*/_jsx(\"span\",{className:\"table-content-\".concat(getEvenOddClass(index)),children:name_surname}),/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"Email\"}),/*#__PURE__*/_jsx(\"span\",{className:\"table-content-\".concat(getEvenOddClass(index)),children:/*#__PURE__*/_jsx(\"a\",{href:\"/comenzi?userId=\".concat(id),children:email})}),/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"Telefon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"table-content-\".concat(getEvenOddClass(index)),children:phone}),/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"Rol\"}),/*#__PURE__*/_jsx(\"span\",{className:\"table-content-\".concat(getEvenOddClass(index)),children:userRole}),/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"Statusul contului\"}),/*#__PURE__*/_jsx(\"span\",{className:\"table-content-\".concat(getEvenOddClass(index),\" \").concat(userStatus==='WAITING FOR APPROVE'?'processing':''),children:userStatus}),/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"Intarzieri\"}),/*#__PURE__*/_jsx(\"span\",{className:\"table-content-\".concat(getEvenOddClass(index)),children:penalties||0}),/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"Actiuni\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"table-content-\".concat(getEvenOddClass(index)),children:[userRole!=='ADMIN'&&userStatus==='ACTIVE'&&/*#__PURE__*/_jsx(\"button\",{onClick:handleMakeAdminClicked,children:\"Make admin\"}),userRole!=='ADMIN'&&userStatus==='ACTIVE'&&/*#__PURE__*/_jsx(\"button\",{onClick:handleBanUser,children:\"Ban\"}),userStatus==='WAITING FOR APPROVE'&&/*#__PURE__*/_jsx(\"button\",{onClick:handleApproveUser,children:\"Approve\"})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"hr\",{})]});}","map":{"version":3,"names":["useState","approveUser","banUser","makeAdmin","getEvenOddClass","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UserRow","_ref","index","id","name_surname","email","phone","role","status","penalties","userRole","setRole","userStatus","setStatus","handleMakeAdminClicked","res","length","alert","handleApproveUser","handleBanUser","children","className","concat","href","onClick"],"sources":["C:/Users/conac/Desktop/OFICIAL/bookstore/frontend/src/components/user/user-row/user-row.jsx"],"sourcesContent":["import { useState } from 'react'\r\nimport { approveUser, banUser, makeAdmin } from '../../../api/users'\r\nimport { getEvenOddClass } from '../../../utils/classes'\r\n\r\nexport default function UserRow({ index, id, name_surname, email, phone, role, status, penalties }) {\r\n    const [userRole, setRole] = useState(role)\r\n    const [userStatus, setStatus] = useState(status)\r\n\r\n    async function handleMakeAdminClicked() {\r\n        const res = await makeAdmin(id)\r\n        if (res?.length) { // if true this should be undefined, otherwise error message\r\n            alert(res)\r\n        } else {\r\n            // cannot make admin if order is in progress\r\n            setRole('ADMIN')\r\n        }\r\n    }\r\n\r\n    async function handleApproveUser() {\r\n        await approveUser(id)\r\n        setStatus('ACTIVE')\r\n    }\r\n\r\n    async function handleBanUser() {\r\n        await banUser(id)\r\n        setStatus('BANNED')\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <span className=\"table-head-col\">Numar</span>\r\n            <span className={`table-content-${getEvenOddClass(index)}`}>{index + 1}</span>\r\n            <span className=\"table-head-col\">Nume</span>\r\n            <span className={`table-content-${getEvenOddClass(index)}`}>{name_surname}</span>\r\n            <span className=\"table-head-col\">Email</span>\r\n            <span className={`table-content-${getEvenOddClass(index)}`}><a href={`/comenzi?userId=${id}`}>{email}</a></span>\r\n            <span className=\"table-head-col\">Telefon</span>\r\n            <span className={`table-content-${getEvenOddClass(index)}`}>{phone}</span>\r\n            <span className=\"table-head-col\">Rol</span>\r\n            <span className={`table-content-${getEvenOddClass(index)}`}>{userRole}</span>\r\n            <span className=\"table-head-col\">Statusul contului</span>\r\n            <span className={`table-content-${getEvenOddClass(index)} ${userStatus === 'WAITING FOR APPROVE' ? 'processing' : ''}`}>{userStatus}</span>\r\n            <span className=\"table-head-col\">Intarzieri</span>\r\n            <span className={`table-content-${getEvenOddClass(index)}`}>{penalties || 0}</span>\r\n            <span className=\"table-head-col\">Actiuni</span>\r\n            <span className={`table-content-${getEvenOddClass(index)}`}>\r\n                {userRole !== 'ADMIN' && userStatus === 'ACTIVE' && <button onClick={handleMakeAdminClicked}>Make admin</button>}\r\n                {userRole !== 'ADMIN' && userStatus === 'ACTIVE' && <button onClick={handleBanUser}>Ban</button>}\r\n                {userStatus === 'WAITING FOR APPROVE' && <button onClick={handleApproveUser}>Approve</button>}\r\n            </span>\r\n            <hr />\r\n            <hr />\r\n        </>\r\n    )\r\n}"],"mappings":"AAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,OAASC,WAAW,CAAEC,OAAO,CAAEC,SAAS,KAAQ,oBAAoB,CACpE,OAASC,eAAe,KAAQ,wBAAwB,QAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAExD,cAAe,SAAS,CAAAC,OAAOA,CAAAC,IAAA,CAAqE,IAApE,CAAEC,KAAK,CAAEC,EAAE,CAAEC,YAAY,CAAEC,KAAK,CAAEC,KAAK,CAAEC,IAAI,CAAEC,MAAM,CAAEC,SAAU,CAAC,CAAAR,IAAA,CAC9F,KAAM,CAACS,QAAQ,CAAEC,OAAO,CAAC,CAAGtB,QAAQ,CAACkB,IAAI,CAAC,CAC1C,KAAM,CAACK,UAAU,CAAEC,SAAS,CAAC,CAAGxB,QAAQ,CAACmB,MAAM,CAAC,CAEhD,cAAe,CAAAM,sBAAsBA,CAAA,CAAG,CACpC,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAvB,SAAS,CAACW,EAAE,CAAC,CAC/B,GAAIY,GAAG,SAAHA,GAAG,WAAHA,GAAG,CAAEC,MAAM,CAAE,CAAE;AACfC,KAAK,CAACF,GAAG,CAAC,CACd,CAAC,IAAM,CACH;AACAJ,OAAO,CAAC,OAAO,CAAC,CACpB,CACJ,CAEA,cAAe,CAAAO,iBAAiBA,CAAA,CAAG,CAC/B,KAAM,CAAA5B,WAAW,CAACa,EAAE,CAAC,CACrBU,SAAS,CAAC,QAAQ,CAAC,CACvB,CAEA,cAAe,CAAAM,aAAaA,CAAA,CAAG,CAC3B,KAAM,CAAA5B,OAAO,CAACY,EAAE,CAAC,CACjBU,SAAS,CAAC,QAAQ,CAAC,CACvB,CAEA,mBACIhB,KAAA,CAAAE,SAAA,EAAAqB,QAAA,eACIzB,IAAA,SAAM0B,SAAS,CAAC,gBAAgB,CAAAD,QAAA,CAAC,OAAK,CAAM,CAAC,cAC7CzB,IAAA,SAAM0B,SAAS,kBAAAC,MAAA,CAAmB7B,eAAe,CAACS,KAAK,CAAC,CAAG,CAAAkB,QAAA,CAAElB,KAAK,CAAG,CAAC,CAAO,CAAC,cAC9EP,IAAA,SAAM0B,SAAS,CAAC,gBAAgB,CAAAD,QAAA,CAAC,MAAI,CAAM,CAAC,cAC5CzB,IAAA,SAAM0B,SAAS,kBAAAC,MAAA,CAAmB7B,eAAe,CAACS,KAAK,CAAC,CAAG,CAAAkB,QAAA,CAAEhB,YAAY,CAAO,CAAC,cACjFT,IAAA,SAAM0B,SAAS,CAAC,gBAAgB,CAAAD,QAAA,CAAC,OAAK,CAAM,CAAC,cAC7CzB,IAAA,SAAM0B,SAAS,kBAAAC,MAAA,CAAmB7B,eAAe,CAACS,KAAK,CAAC,CAAG,CAAAkB,QAAA,cAACzB,IAAA,MAAG4B,IAAI,oBAAAD,MAAA,CAAqBnB,EAAE,CAAG,CAAAiB,QAAA,CAAEf,KAAK,CAAI,CAAC,CAAM,CAAC,cAChHV,IAAA,SAAM0B,SAAS,CAAC,gBAAgB,CAAAD,QAAA,CAAC,SAAO,CAAM,CAAC,cAC/CzB,IAAA,SAAM0B,SAAS,kBAAAC,MAAA,CAAmB7B,eAAe,CAACS,KAAK,CAAC,CAAG,CAAAkB,QAAA,CAAEd,KAAK,CAAO,CAAC,cAC1EX,IAAA,SAAM0B,SAAS,CAAC,gBAAgB,CAAAD,QAAA,CAAC,KAAG,CAAM,CAAC,cAC3CzB,IAAA,SAAM0B,SAAS,kBAAAC,MAAA,CAAmB7B,eAAe,CAACS,KAAK,CAAC,CAAG,CAAAkB,QAAA,CAAEV,QAAQ,CAAO,CAAC,cAC7Ef,IAAA,SAAM0B,SAAS,CAAC,gBAAgB,CAAAD,QAAA,CAAC,mBAAiB,CAAM,CAAC,cACzDzB,IAAA,SAAM0B,SAAS,kBAAAC,MAAA,CAAmB7B,eAAe,CAACS,KAAK,CAAC,MAAAoB,MAAA,CAAIV,UAAU,GAAK,qBAAqB,CAAG,YAAY,CAAG,EAAE,CAAG,CAAAQ,QAAA,CAAER,UAAU,CAAO,CAAC,cAC3IjB,IAAA,SAAM0B,SAAS,CAAC,gBAAgB,CAAAD,QAAA,CAAC,YAAU,CAAM,CAAC,cAClDzB,IAAA,SAAM0B,SAAS,kBAAAC,MAAA,CAAmB7B,eAAe,CAACS,KAAK,CAAC,CAAG,CAAAkB,QAAA,CAAEX,SAAS,EAAI,CAAC,CAAO,CAAC,cACnFd,IAAA,SAAM0B,SAAS,CAAC,gBAAgB,CAAAD,QAAA,CAAC,SAAO,CAAM,CAAC,cAC/CvB,KAAA,SAAMwB,SAAS,kBAAAC,MAAA,CAAmB7B,eAAe,CAACS,KAAK,CAAC,CAAG,CAAAkB,QAAA,EACtDV,QAAQ,GAAK,OAAO,EAAIE,UAAU,GAAK,QAAQ,eAAIjB,IAAA,WAAQ6B,OAAO,CAAEV,sBAAuB,CAAAM,QAAA,CAAC,YAAU,CAAQ,CAAC,CAC/GV,QAAQ,GAAK,OAAO,EAAIE,UAAU,GAAK,QAAQ,eAAIjB,IAAA,WAAQ6B,OAAO,CAAEL,aAAc,CAAAC,QAAA,CAAC,KAAG,CAAQ,CAAC,CAC/FR,UAAU,GAAK,qBAAqB,eAAIjB,IAAA,WAAQ6B,OAAO,CAAEN,iBAAkB,CAAAE,QAAA,CAAC,SAAO,CAAQ,CAAC,EAC3F,CAAC,cACPzB,IAAA,QAAK,CAAC,cACNA,IAAA,QAAK,CAAC,EACR,CAAC,CAEX","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}