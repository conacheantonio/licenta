{"ast":null,"code":"import{useEffect,useState}from'react';import{register}from'../../../api/auth';import Error from'../../error/error';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function RegisterForm(_ref){let{setShowLoginForm}=_ref;const[nameSurname,setNameSurname]=useState('');const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[confirmedPassword,setConfirmedPassword]=useState('');const[phoneNumber,setphoneNumber]=useState('');const[pin,setPin]=useState('');const[errorMessage,setErrorMessage]=useState('');useEffect(()=>{if(password&&confirmedPassword&&password!==confirmedPassword){setErrorMessage('Parola nu a fost confirmata!');}else{setErrorMessage('');}},[password,confirmedPassword]);async function handleFormSubmit(event){event.preventDefault();if(password&&confirmedPassword&&password===confirmedPassword){// try catch again\nconst registerResponse=await register(nameSurname,email,password,confirmedPassword,phoneNumber,pin);const json=await registerResponse.json();if(registerResponse.status!==201){setErrorMessage(json.message);return;}document.cookie=\"token=\".concat(json.token,\";max-age=\").concat(json.expirationDate*1000);window.location.reload();}else{setErrorMessage('Te rugam sa confirmi parola!');}}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:event=>handleFormSubmit(event),children:[/*#__PURE__*/_jsx(\"label\",{children:\"Nume si Prenume\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:event=>setNameSurname(event.target.value),placeholder:\"Ion Popescu\",required:true}),/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",onChange:event=>setEmail(event.target.value),placeholder:\"utilizator@email.com\",required:true}),/*#__PURE__*/_jsx(\"label\",{children:\"Parola\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",onChange:event=>setPassword(event.target.value),placeholder:\"parola puternica\",required:true}),/*#__PURE__*/_jsx(\"label\",{children:\"Confirma parola\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",onChange:event=>setConfirmedPassword(event.target.value),placeholder:\"parola puternica\",required:true}),/*#__PURE__*/_jsx(\"label\",{children:\"Numar de telefon\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",onChange:event=>setphoneNumber(event.target.value),placeholder:\"0755123456\",required:true}),/*#__PURE__*/_jsx(\"label\",{children:\"Pin\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",onChange:event=>setPin(event.target.value),placeholder:\"1234\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Inregistreaza-te!\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Ai deja cont? \",/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowLoginForm(true),children:\"Inapoi la log in!\"})]})]}),/*#__PURE__*/_jsx(Error,{message:errorMessage})]});}","map":{"version":3,"names":["useEffect","useState","register","Error","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RegisterForm","_ref","setShowLoginForm","nameSurname","setNameSurname","email","setEmail","password","setPassword","confirmedPassword","setConfirmedPassword","phoneNumber","setphoneNumber","pin","setPin","errorMessage","setErrorMessage","handleFormSubmit","event","preventDefault","registerResponse","json","status","message","document","cookie","concat","token","expirationDate","window","location","reload","children","onSubmit","type","onChange","target","value","placeholder","required","onClick"],"sources":["C:/Users/conac/Desktop/OFICIAL/bookstore/frontend/src/components/auth/register-form/register-form.jsx"],"sourcesContent":["import { useEffect, useState } from 'react'\r\nimport { register } from '../../../api/auth'\r\nimport Error from '../../error/error'\r\n\r\nexport default function RegisterForm({ setShowLoginForm }) {\r\n    const [nameSurname, setNameSurname] = useState('')\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [confirmedPassword, setConfirmedPassword] = useState('')\r\n    const [phoneNumber, setphoneNumber] = useState('')\r\n    const [pin, setPin] = useState('')\r\n    const [errorMessage, setErrorMessage] = useState('')\r\n\r\n    useEffect(() => {\r\n        if (password && confirmedPassword && password !== confirmedPassword) {\r\n            setErrorMessage('Parola nu a fost confirmata!')\r\n        } else {\r\n            setErrorMessage('')\r\n        }\r\n    }, [password, confirmedPassword])\r\n\r\n    async function handleFormSubmit(event) {\r\n        event.preventDefault()\r\n        if (password && confirmedPassword && password === confirmedPassword) {\r\n            // try catch again\r\n            const registerResponse = await register(nameSurname, email, password, confirmedPassword, phoneNumber, pin)\r\n            const json = await registerResponse.json()\r\n            if (registerResponse.status !== 201) {\r\n                setErrorMessage(json.message)\r\n                return\r\n            }\r\n            document.cookie = `token=${json.token};max-age=${json.expirationDate * 1000}`\r\n            window.location.reload()\r\n        } else {\r\n            setErrorMessage('Te rugam sa confirmi parola!')\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <form onSubmit={(event) => handleFormSubmit(event)}>\r\n                <label>Nume si Prenume</label>\r\n                <input type=\"text\" onChange={(event) => setNameSurname(event.target.value)} placeholder=\"Ion Popescu\" required />\r\n                {/* set custom validity? title */}\r\n\r\n                <label>Email</label>\r\n                <input type=\"email\" onChange={(event) => setEmail(event.target.value)} placeholder=\"utilizator@email.com\" required />\r\n\r\n                <label>Parola</label>\r\n                <input type=\"password\" onChange={(event) => setPassword(event.target.value)} placeholder=\"parola puternica\" required />\r\n\r\n                <label>Confirma parola</label>\r\n                <input type=\"password\" onChange={(event) => setConfirmedPassword(event.target.value)} placeholder=\"parola puternica\" required />\r\n\r\n                <label>Numar de telefon</label>\r\n                <input type=\"tel\" onChange={(event) => setphoneNumber(event.target.value)} placeholder=\"0755123456\" required />\r\n\r\n                <label>Pin</label>\r\n                <input type=\"password\" onChange={(event) => setPin(event.target.value)} placeholder=\"1234\" required />\r\n\r\n                <button type=\"submit\">Inregistreaza-te!</button>\r\n                <p>Ai deja cont? <button type=\"button\" onClick={() => setShowLoginForm(true)}>Inapoi la log in!</button></p>\r\n            </form>\r\n            <Error message={errorMessage}/>\r\n        </>\r\n    )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}