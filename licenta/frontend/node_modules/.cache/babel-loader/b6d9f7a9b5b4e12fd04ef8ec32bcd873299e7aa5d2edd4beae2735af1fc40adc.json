{"ast":null,"code":"import{useState}from'react';import{changeDescription,removeBook}from'../../../../api/book';import IncreaseBookStockForm from'../../increase-book-stock-form/increase-book-stock-form';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export default function BookAdminFormat(_ref){let{index,id,title,author,description,year,ISBN,pages,genre}=_ref;const[shouldShow,setShouldShow]=useState(true);const[showStockForm,setShowStockForm]=useState(false);const[isEditing,setIsEditing]=useState(false);const[newDescription,setNewDescription]=useState(description);async function handleRemoveBook(){const res=await removeBook(ISBN);if(res===true){setShouldShow(false);}else{alert(res);}}function handleChangeDescription(value){setNewDescription(value);}async function handleSaveNewDescription(){const res=await changeDescription({id,newDescription});if(res.status===204){setIsEditing(false);window.location.reload();}else{const json=await res.json();alert(json.message);return;}}function handleCancel(){setNewDescription(description);setIsEditing(false);}return shouldShow&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"Numar\"}),/*#__PURE__*/_jsx(\"span\",{className:\"table-content-\".concat(index%2?'even':'odd'),children:index+1}),/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"Titlu\"}),/*#__PURE__*/_jsx(\"span\",{className:\"table-content-\".concat(index%2?'even':'odd'),children:title}),/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"Autor\"}),/*#__PURE__*/_jsx(\"span\",{className:\"table-content-\".concat(index%2?'even':'odd'),children:author}),/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"Descriere\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"table-content-\".concat(index%2?'even':'odd',\" edit\"),children:[!isEditing?description:/*#__PURE__*/_jsx(\"input\",{value:newDescription,onChange:e=>handleChangeDescription(e.target.value)}),!isEditing?/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsEditing(true),children:/*#__PURE__*/_jsx(\"img\",{src:\"/edit.svg\",alt:\"edit\"})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleSaveNewDescription,children:/*#__PURE__*/_jsx(\"img\",{src:\"/confirm.svg\",alt:\"confirm\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCancel,children:/*#__PURE__*/_jsx(\"img\",{src:\"/cancel.svg\",alt:\"cancel\"})})]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"An\"}),/*#__PURE__*/_jsx(\"span\",{className:\"table-content-\".concat(index%2?'even':'odd'),children:year}),/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"ISBN\"}),/*#__PURE__*/_jsx(\"span\",{className:\"table-content-\".concat(index%2?'even':'odd'),children:ISBN}),/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"Pagini\"}),/*#__PURE__*/_jsx(\"span\",{className:\"table-content-\".concat(index%2?'even':'odd'),children:pages}),/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"Gen\"}),/*#__PURE__*/_jsx(\"span\",{className:\"table-content-\".concat(index%2?'even':'odd'),children:genre}),/*#__PURE__*/_jsx(\"span\",{className:\"table-head-col\",children:\"Actiuni\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"table-content-\".concat(index%2?'even':'odd'),children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleRemoveBook,children:\"Sterge\"}),!showStockForm&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowStockForm(true),children:\"Mareste stocul\"}),showStockForm&&/*#__PURE__*/_jsx(IncreaseBookStockForm,{id:id,setShowStockForm:setShowStockForm})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"hr\",{})]});}","map":{"version":3,"names":["useState","changeDescription","removeBook","IncreaseBookStockForm","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","BookAdminFormat","_ref","index","id","title","author","description","year","ISBN","pages","genre","shouldShow","setShouldShow","showStockForm","setShowStockForm","isEditing","setIsEditing","newDescription","setNewDescription","handleRemoveBook","res","alert","handleChangeDescription","value","handleSaveNewDescription","status","window","location","reload","json","message","handleCancel","children","className","concat","onChange","e","target","onClick","src","alt"],"sources":["C:/Users/conac/Desktop/OFICIAL/bookstore/frontend/src/components/book/book-row/admin-format/book-admin-format.jsx"],"sourcesContent":["import { useState } from 'react'\r\nimport { changeDescription, removeBook } from '../../../../api/book'\r\nimport IncreaseBookStockForm from '../../increase-book-stock-form/increase-book-stock-form'\r\n\r\nexport default function BookAdminFormat({ index, id, title, author, description, year, ISBN, pages, genre }) {\r\n    const [shouldShow, setShouldShow] = useState(true)\r\n    const [showStockForm, setShowStockForm] = useState(false)\r\n    const [isEditing, setIsEditing] = useState(false)\r\n    const [newDescription, setNewDescription] = useState(description)\r\n\r\n    async function handleRemoveBook() {\r\n        const res = await removeBook(ISBN)\r\n        if (res === true) {\r\n            setShouldShow(false)\r\n        } else {\r\n            alert(res)\r\n        }\r\n    }\r\n\r\n    function handleChangeDescription(value) {\r\n        setNewDescription(value)\r\n    }\r\n\r\n    async function handleSaveNewDescription() {\r\n        const res = await changeDescription({ id, newDescription })\r\n        if (res.status === 204) {\r\n            setIsEditing(false)\r\n            window.location.reload()\r\n        } else {\r\n            const json = await res.json()\r\n            alert(json.message)\r\n            return\r\n        }\r\n    }\r\n\r\n    function handleCancel() {\r\n        setNewDescription(description)\r\n        setIsEditing(false)\r\n    }\r\n\r\n    return (\r\n        shouldShow &&\r\n        <>\r\n            <span className=\"table-head-col\">Numar</span>\r\n            <span className={`table-content-${index % 2 ? 'even' : 'odd'}`}>{index + 1}</span>\r\n            <span className=\"table-head-col\">Titlu</span>\r\n            <span className={`table-content-${index % 2 ? 'even' : 'odd'}`}>{title}</span>\r\n            <span className=\"table-head-col\">Autor</span>\r\n            <span className={`table-content-${index % 2 ? 'even' : 'odd'}`}>{author}</span>\r\n            <span className=\"table-head-col\">Descriere</span>\r\n            <span className={`table-content-${index % 2 ? 'even' : 'odd'} edit`}>\r\n                {!isEditing ? description : <input value={newDescription} onChange={(e) => handleChangeDescription(e.target.value)} />}\r\n                {!isEditing ? <button onClick={() => setIsEditing(true)}><img src=\"/edit.svg\" alt=\"edit\" /></button>\r\n                : <>\r\n                    <button onClick={handleSaveNewDescription}><img src=\"/confirm.svg\" alt=\"confirm\" /></button>\r\n                    <button onClick={handleCancel}><img src=\"/cancel.svg\" alt=\"cancel\" /></button>\r\n                </>\r\n            }\r\n            </span>\r\n            <span className=\"table-head-col\">An</span>\r\n            <span className={`table-content-${index % 2 ? 'even' : 'odd'}`}>{year}</span>\r\n            <span className=\"table-head-col\">ISBN</span>\r\n            <span className={`table-content-${index % 2 ? 'even' : 'odd'}`}>{ISBN}</span>\r\n            <span className=\"table-head-col\">Pagini</span>\r\n            <span className={`table-content-${index % 2 ? 'even' : 'odd'}`}>{pages}</span>\r\n            <span className=\"table-head-col\">Gen</span>\r\n            <span className={`table-content-${index % 2 ? 'even' : 'odd'}`}>{genre}</span>\r\n            <span className=\"table-head-col\">Actiuni</span>\r\n            <span className={`table-content-${index % 2 ? 'even' : 'odd'}`}>\r\n                {<button onClick={handleRemoveBook}>Sterge</button>}\r\n                {!showStockForm && <button onClick={() => setShowStockForm(true)}>Mareste stocul</button>}\r\n                {showStockForm && <IncreaseBookStockForm id={id} setShowStockForm={setShowStockForm}/>}\r\n            </span>\r\n            <hr />\r\n            <hr />\r\n        </>\r\n    )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}