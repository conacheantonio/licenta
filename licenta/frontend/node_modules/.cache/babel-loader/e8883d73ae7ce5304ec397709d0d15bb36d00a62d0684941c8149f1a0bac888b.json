{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\conac\\\\Desktop\\\\OFICIAL\\\\bookstore\\\\frontend\\\\src\\\\app.jsx\",\n  _s = $RefreshSig$();\nimport './app.css';\nimport { useEffect, useState } from 'react';\nimport { Routes, Route } from 'react-router-dom';\nimport { UserContext } from './context/context';\nimport { getToken } from './utils/jwt';\nimport { getUserRoleFromServer } from './api/auth';\nimport NewBookForm from './components/book/new-book-form/new-book-form';\nimport Header from './components/header/header';\nimport Footer from './components/footer/footer';\nimport AuthPage from './pages/auth/auth-page';\nimport OrdersPage from './pages/orders-page/orders-page';\nimport UsersPage from './pages/users-page/users-page';\nimport BooksPage from './pages/books-page/books-page';\nimport PageNotFound from './pages/404/404';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function App() {\n  _s();\n  const [role, setRole] = useState('');\n  const [userId, setUserId] = useState(null);\n  const [status, setStatus] = useState('');\n\n  // context does not persist on refresh\n  useEffect(() => {\n    // validate token if exists, extract role every time the homepage (re)loads in case token changed\n    getUserRoleFromServer(getToken(), setRole, setUserId, setStatus);\n  });\n  function getElement(route) {\n    switch (role) {\n      case 'ADMIN':\n        // admin can only be active\n        switch (route) {\n          case '/':\n            return /*#__PURE__*/_jsxDEV(UsersPage, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 34,\n              columnNumber: 32\n            }, this);\n          case '/carti':\n            return /*#__PURE__*/_jsxDEV(BooksPage, {\n              isAdmin: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 36,\n              columnNumber: 32\n            }, this);\n          case '/adauga':\n            return /*#__PURE__*/_jsxDEV(NewBookForm, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 38,\n              columnNumber: 32\n            }, this);\n          case '/comenzi':\n            return /*#__PURE__*/_jsxDEV(OrdersPage, {\n              isAdmin: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 40,\n              columnNumber: 32\n            }, this);\n          default:\n            // should never enter here, but just in case\n            return /*#__PURE__*/_jsxDEV(PageNotFound, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 42,\n              columnNumber: 32\n            }, this);\n        }\n      case 'READER':\n        if (status === 'WAITING FOR APPROVE') {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"status-page\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"/pending.svg\",\n              alt: \"pending\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 48,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Un administrator trebuie sa iti aprobe cererea de inscriere. Te rugam sa revii mai tarziu.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 49,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 25\n          }, this);\n        } else if (status === 'ACTIVE') {\n          switch (route) {\n            case '/':\n              return /*#__PURE__*/_jsxDEV(BooksPage, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 55,\n                columnNumber: 36\n              }, this);\n            case '/comenzi':\n              return /*#__PURE__*/_jsxDEV(OrdersPage, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 57,\n                columnNumber: 36\n              }, this);\n            default:\n              // should never enter here, but just in case\n              return /*#__PURE__*/_jsxDEV(PageNotFound, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 59,\n                columnNumber: 36\n              }, this);\n          }\n        } else if (status === 'BANNED') {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"status-page\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"/banned.svg\",\n              alt: \"banned\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Contul tau a fost inchis permanent.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 25\n          }, this);\n        } else {\n          return /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Nu ar fi trebuit sa ajungi aici\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 28\n          }, this);\n        }\n      default:\n        if (route === '/') {\n          return /*#__PURE__*/_jsxDEV(AuthPage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 28\n          }, this);\n        } else {\n          return /*#__PURE__*/_jsxDEV(PageNotFound, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 28\n          }, this);\n        }\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: {\n      role,\n      setRole,\n      userId,\n      setUserId,\n      status,\n      setStatus\n    },\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      children: /*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/\",\n          element: getElement('/')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/carti\",\n          element: getElement('/carti')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/adauga\",\n          element: getElement('/adauga')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/comenzi\",\n          element: getElement('/comenzi')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"*\",\n          exact: true,\n          element: /*#__PURE__*/_jsxDEV(PageNotFound, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 59\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 9\n  }, this);\n}\n_s(App, \"RbJ0QHQ9O2qTbOd1zAF1Vdha0l0=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","Routes","Route","UserContext","getToken","getUserRoleFromServer","NewBookForm","Header","Footer","AuthPage","OrdersPage","UsersPage","BooksPage","PageNotFound","jsxDEV","_jsxDEV","App","_s","role","setRole","userId","setUserId","status","setStatus","getElement","route","fileName","_jsxFileName","lineNumber","columnNumber","isAdmin","className","children","src","alt","Provider","value","path","element","exact","_c","$RefreshReg$"],"sources":["C:/Users/conac/Desktop/OFICIAL/bookstore/frontend/src/app.jsx"],"sourcesContent":["import './app.css'\r\nimport { useEffect, useState } from 'react'\r\nimport { Routes, Route } from 'react-router-dom'\r\nimport { UserContext } from './context/context'\r\nimport { getToken } from './utils/jwt'\r\nimport { getUserRoleFromServer } from './api/auth'\r\n\r\nimport NewBookForm from './components/book/new-book-form/new-book-form'\r\nimport Header from './components/header/header'\r\nimport Footer from './components/footer/footer'\r\n\r\nimport AuthPage from './pages/auth/auth-page'\r\nimport OrdersPage from './pages/orders-page/orders-page'\r\nimport UsersPage from './pages/users-page/users-page'\r\nimport BooksPage from './pages/books-page/books-page'\r\nimport PageNotFound from './pages/404/404'\r\n\r\nexport default function App() {\r\n    const [role, setRole] = useState('')\r\n    const [userId, setUserId] = useState(null)\r\n    const [status, setStatus] = useState('')\r\n\r\n    // context does not persist on refresh\r\n    useEffect(() => {\r\n        // validate token if exists, extract role every time the homepage (re)loads in case token changed\r\n        getUserRoleFromServer(getToken(), setRole, setUserId, setStatus)\r\n    })\r\n\r\n    function getElement(route) {\r\n        switch(role) {\r\n            case 'ADMIN': // admin can only be active\r\n                switch(route) {\r\n                    case '/':\r\n                        return <UsersPage />\r\n                    case '/carti':\r\n                        return <BooksPage isAdmin={true}/>\r\n                    case '/adauga':\r\n                        return <NewBookForm />\r\n                    case '/comenzi':\r\n                        return <OrdersPage isAdmin={true} />\r\n                    default: // should never enter here, but just in case\r\n                        return <PageNotFound />\r\n                }\r\n            case 'READER':\r\n                if (status === 'WAITING FOR APPROVE') {\r\n                    return (\r\n                        <div className=\"status-page\">\r\n                            <img src=\"/pending.svg\" alt=\"pending\" />\r\n                            <p>Un administrator trebuie sa iti aprobe cererea de inscriere. Te rugam sa revii mai tarziu.</p>\r\n                        </div>\r\n                    )\r\n                } else if (status === 'ACTIVE') {\r\n                    switch(route) {\r\n                        case '/':\r\n                            return <BooksPage />\r\n                        case '/comenzi':\r\n                            return <OrdersPage />\r\n                        default: // should never enter here, but just in case\r\n                            return <PageNotFound />\r\n                    }\r\n                } else if (status === 'BANNED') {\r\n                    return (\r\n                        <div className=\"status-page\">\r\n                            <img src=\"/banned.svg\" alt=\"banned\" />\r\n                            <p>Contul tau a fost inchis permanent.</p>\r\n                        </div>\r\n                    )\r\n                } else {\r\n                    return <p>Nu ar fi trebuit sa ajungi aici</p>\r\n                }\r\n            default:\r\n                if (route === '/') {\r\n                    return <AuthPage />\r\n                } else {\r\n                    return <PageNotFound />\r\n                }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <UserContext.Provider value={{ role, setRole, userId, setUserId, status, setStatus }}>\r\n            <Header />\r\n            <main>\r\n                <Routes>\r\n                    <Route path='/' element={getElement('/')} />\r\n                    <Route path='/carti' element={getElement('/carti')} />\r\n                    <Route path='/adauga' element={getElement('/adauga')} />\r\n                    <Route path='/comenzi' element={getElement('/comenzi')} />\r\n                    <Route path='*' exact={true} element={<PageNotFound />} />\r\n                </Routes>\r\n            </main>\r\n            <Footer />\r\n        </UserContext.Provider>\r\n    )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}